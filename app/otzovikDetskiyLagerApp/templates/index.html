<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Форма для участия в мероприятии</title>
</head>
    <body>
        <div class="container">
            <div class="logo">
                <img src="{% static 'images/logo.png' %}" alt="Логотип">
            </div>
            <form action="/" method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
                <label for="fio">ФИО Ребенка:</label>
                <input type="text" id="fio" name="fio_child" required><br>
            
                <label for="city">Город/населенный пункт:</label>
                <input type="text" id="city" name="city" required><br>
            
                <label for="dou_number">Номер ДОУ:</label>
                <input type="text" id="dou_number" name="dou_number" required><br>
            
                <label for="mentor_fio">ФИО педагога наставника:</label>
                <input type="text" id="mentor_fio" name="mentor_fio" required><br>
            
                <label for="game_situation">Игровая ситуация:</label>
                <select id="game_situation" name="game_situation" required>
                {% for role in roles %}
                    <option value="{{ role }}">{{ role }}</option>
                {% endfor %}
                </select><br>
            
                <label for="data_processing_agreement">Соглашение на обработку персональных данных (.PDF):</label>
                <input type="file" id="data_processing_agreement" name="data_processing_agreement" accept=".pdf" required><br>
            
                <label for="photos">Фото (8 штук):</label>
                <input type="file" id="photos" name="photos[]" accept=".jpeg, .jpg, .png, .gif" required multiple><br>
            
                <label for="video">Видео участника (до 1ГБ, .mp4):</label>
                <input type="file" id="video" name="video" accept=".mp4, .avi, .mkv .mov" required><br>
            
                <input type="submit" value="Отправить">
            </form>
        </div>
    </body>
        <script>
            function validateForm() {
                // Проверка количества загруженных фото
                var photoInput = document.getElementById("photos");
                if (photoInput.files.length !== 8) {
                    alert("Пожалуйста, загрузите ровно 8 фото.");
                    return false;
                }

                // Проверка размера файла видео
                var videoInput = document.getElementById("video");
                if (videoInput.files.length > 0) {
                    var maxFileSize = 1024 * 1024 * 1024; // 1 ГБ
                    var fileSize = videoInput.files[0].size;

                    if (fileSize > maxFileSize) {
                        alert("Размер файла видео должен быть не более 1 ГБ.");
                        return false;
                    }
                }

                return true;
            }
        </script>
</html>
